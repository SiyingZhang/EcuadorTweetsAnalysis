<!DOCTYPE html>
<html>
<head>
	<title>Ecuador Data Visualization</title>
	<link rel="stylesheet" type="text/css" href="css/ex.css"/>
	<link rel="stylesheet" type="text/css" href="css/jquery-ui-1.8rc3.custom.css">
	<link rel="stylesheet" type="text/css" href="css/style.css">
	<script type="text/javascript" src="js/protovis.js"></script>
	<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script>
	<script type="text/javascript" src="js/jquery-ui-1.8rc3.custom.min.js"></script>
	<!-- Data: Json format -->
	<script type="text/javascript" src="ecuador_tweets.js"></script>
</head>
<body>
	<div class="heading">
		<h3>Data Visualization - Ecuador Earthquake</h3>
		<h5>Tweets with #ecuador or #ecuadorearthquake (Apr 26 - May 03)</h5>
	</div>		
	<div id="fig">
		<div id="container">
			<b id="dayLabel">Date: </b>
			<div id="dateSlider" class="ui-slider ui-slider-horizontal ui-widget ui-widget-content ui-corner-all">
				<a href="#" class="ui-slider-handle ui-state-default ui-corner-all"></a>
			</div>
			<img id="play" src="img/play.png" alt="Play" onclick="playClick()">
		</div>
		<!-- Visualization -->
		<script type="text/javascript+protovis">
			
			var i = 0,
				w = 810,
				h = 400,
				mapMargin = 30;

			var vis = new pv.Panel()
		  		.width(w)
		  		.height(h)
		  		.top(50)
		  		.bottom(30);

			$(dateSlider).slider({
				min:
				vis.render()
			})



		  	var dateScale = pv.Scale.linear()
		  		.domain(26, 33)
		  		.range({x: mapMargin, y: mapMargin}, {x: w-mapMargin, y: h-mapMargin});

		  	//Add the labels for the date slider
		  	vis.add(pv.Rule)
		  		.data(["Apr 26", "Apr 27", "Apr 28", "Apr 29", "Apr 30", "May 01", "May 02", "May 03"])
		  		.left(dateScale)
		  		.height(4)
		  		.top(-40)
		  	  .anchor("bottom").add(pv.Label);

		  	var timer = undefined;
	        function playClick() {
	          if (timer) {
	            stop();
	          } else {
	            if (date == ecuador_tweets.maxDate) date = ecuador_tweets.minDate;
	            $(dateSlider).slider('value', date);
	            $(play).attr("src", 'img/stop.png');
	            updateYear();
	            vis.render();
	            timer = setInterval(function() {
	              year++;
	              if (year >= us_stats.maxYear) stop();
	              $(dateSlider).slider('value', year);
	              updateYear();
	              vis.render();
	            }, 900);
	          }
	        }

	        // Stop the animation
	        function stop() {
	          clearInterval(timer);
	          timer = undefined;
	          $(play).attr("src", 'img/play.png');
	        }

		</script>	
	</div>

</body>
</html>

